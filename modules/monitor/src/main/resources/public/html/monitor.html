<div>
    <a href="javascript:WSMonitor()">Run WebSocket</a>
</div>

<script type="text/javascript">
    (function() {
        function WSMonitor()
        {
            if ("WebSocket" in window)
            {
                var self = this;

                var open = function() {
                    console.log("Connection is opened...");
                    self.ws = new WebSocket("ws://localhost:8080/wsmonitor");

                    /*
                    self.ws.onopen = function()
                    {
                        ws.send("Message to send");
                        console.log("Message is sent...");
                    };
                    */

                    self.ws.onmessage = function (evt)
                    {
                        var received_msg = evt.data;
                        console.log("Message is received:\n" + received_msg);
                    };

                    self.ws.onclose = function()
                    {
                        console.log("Connection is closed...");
                        open();
                    };
                }

                open();
            } else {
                console.log("WebSocket NOT supported by your Browser!");
            }
        }
        var webSocket = WSMonitor();
        })();
</script>
